{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Home assistant Home Assistant est un logiciel domotique open source que j'utilise afin de rendre ma maison \"intelligente\". Je vais vous pr\u00e9senter les principaux sc\u00e9narios d'automatisation que j'utilise au quotidien. L'objectif est de mettre en place des actions automatiques en r\u00e9ponse \u00e0 des \u00e9v\u00e9nements survenant au sein de la maison. Allumer des lumi\u00e8res au r\u00e9veil","title":"Home assistant"},{"location":"#home-assistant","text":"Home Assistant est un logiciel domotique open source que j'utilise afin de rendre ma maison \"intelligente\". Je vais vous pr\u00e9senter les principaux sc\u00e9narios d'automatisation que j'utilise au quotidien. L'objectif est de mettre en place des actions automatiques en r\u00e9ponse \u00e0 des \u00e9v\u00e9nements survenant au sein de la maison. Allumer des lumi\u00e8res au r\u00e9veil","title":"Home assistant"},{"location":"reveil/","text":"R\u00e9veil Objectif Allumer 2 lampes \u00e0 l'heure du r\u00e9veil. Mat\u00e9riel utilis\u00e9 2 ampoules de marque Wiz positionn\u00e9es dans le salon et la salle \u00e0 manger 1 t\u00e9l\u00e9phone portable sur lequel est install\u00e9e l'application mobile Home assistant pour r\u00e9cup\u00e9rer l'heure de la prochaine alarme (heure de r\u00e9veil). Mise en oeuvre Les ampoules de marque Wiz ne sont actuellement pas reconnues par Home Assitant, mais sont int\u00e9gr\u00e9s dans d'autres solutions. J'ai utilis\u00e9 l'int\u00e9gration Home Assistant/SmartThings pour contourner le probl\u00e8me. La solution est loin d'\u00eatre id\u00e9ale puisqu'il faut passer par un serveur distant pour effectuer une action sur une ampoule locale. Cela pose des probl\u00e8mes de confidentialit\u00e9, d'ind\u00e9pendance vis \u00e0 vis d'un service externe (qui pourrait s'arr\u00eater ou devenir payant), mais aussi par rapport \u00e0 la latence que cela peut induire. Script r\u00e9veil Permet d'allumer les ampoules et de r\u00e9gler puissance et temp\u00e9rature. scripts: reveil: alias: reveil sequence: - service: light.turn_on data: brightness: 80 color_temp: 1000000 entity_id: light.salle_a_manger - service: light.turn_on data: {} entity_id: light.salon mode: single icon: mdi:alarm Automation L'automation se base sur l'heure de la prochaine alarme remont\u00e9e par l'application mobile : sensor.pixel_2_xl_next_alarm . Le script reveil est appel\u00e9 quand l'heure de reveil est atteinte si le mode vacance n'a pas \u00e9t\u00e9 activ\u00e9. automation: - id: lumierereveil alias: allumer lumi\u00e8res au r\u00e9veil trigger: - platform: template value_template: > {{now().strftime(\"%a %h %d %H:%M %Z %Y\") == (((state_attr('sensor.pixel_2_xl_next_alarm', 'Time in Milliseconds') | int / 1000) + 0*60 ) | timestamp_custom('%a %h %d %H:%M %Z %Y'))}} condition: - condition: state entity_id: input_boolean.mode_vacance state: 'off' action: - service: script.reveil","title":"R\u00e9veil"},{"location":"reveil/#reveil","text":"Objectif Allumer 2 lampes \u00e0 l'heure du r\u00e9veil.","title":"R\u00e9veil"},{"location":"reveil/#materiel-utilise","text":"2 ampoules de marque Wiz positionn\u00e9es dans le salon et la salle \u00e0 manger 1 t\u00e9l\u00e9phone portable sur lequel est install\u00e9e l'application mobile Home assistant pour r\u00e9cup\u00e9rer l'heure de la prochaine alarme (heure de r\u00e9veil).","title":"Mat\u00e9riel utilis\u00e9"},{"location":"reveil/#mise-en-oeuvre","text":"Les ampoules de marque Wiz ne sont actuellement pas reconnues par Home Assitant, mais sont int\u00e9gr\u00e9s dans d'autres solutions. J'ai utilis\u00e9 l'int\u00e9gration Home Assistant/SmartThings pour contourner le probl\u00e8me. La solution est loin d'\u00eatre id\u00e9ale puisqu'il faut passer par un serveur distant pour effectuer une action sur une ampoule locale. Cela pose des probl\u00e8mes de confidentialit\u00e9, d'ind\u00e9pendance vis \u00e0 vis d'un service externe (qui pourrait s'arr\u00eater ou devenir payant), mais aussi par rapport \u00e0 la latence que cela peut induire.","title":"Mise en oeuvre"},{"location":"reveil/#script-reveil","text":"Permet d'allumer les ampoules et de r\u00e9gler puissance et temp\u00e9rature. scripts: reveil: alias: reveil sequence: - service: light.turn_on data: brightness: 80 color_temp: 1000000 entity_id: light.salle_a_manger - service: light.turn_on data: {} entity_id: light.salon mode: single icon: mdi:alarm","title":"Script r\u00e9veil"},{"location":"reveil/#automation","text":"L'automation se base sur l'heure de la prochaine alarme remont\u00e9e par l'application mobile : sensor.pixel_2_xl_next_alarm . Le script reveil est appel\u00e9 quand l'heure de reveil est atteinte si le mode vacance n'a pas \u00e9t\u00e9 activ\u00e9. automation: - id: lumierereveil alias: allumer lumi\u00e8res au r\u00e9veil trigger: - platform: template value_template: > {{now().strftime(\"%a %h %d %H:%M %Z %Y\") == (((state_attr('sensor.pixel_2_xl_next_alarm', 'Time in Milliseconds') | int / 1000) + 0*60 ) | timestamp_custom('%a %h %d %H:%M %Z %Y'))}} condition: - condition: state entity_id: input_boolean.mode_vacance state: 'off' action: - service: script.reveil","title":"Automation"}]}